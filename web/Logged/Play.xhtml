<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>The Department</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        <script type="text/javascript" src="map.js"></script>
        <p:resources/>
    </h:head>

    <body>

<div style="position:fixed; left:50%; margin-left: -5px; top:18px;
            height:0; width:0; border-style:solid; border-color:transparent ">

<!-- MAINTAIN ORDER FOR PROPER OVERLAPPINGS -->

<img id="p1" src="img/lr2.png" />


<img id="p2" src="img/br1.png" />

<img id="p3" src="img/po1.png" />

<img id="p4" src="img/lb1.png" />

<img id="p5" src="img/tr1.png" />

<img id="p6" src="img/sb1.png" />

<img id="p7" src="img/su1.png" />

<img id="p8" src="img/nop.png" />

<img id="p9" src="img/po2.png" />

<img id="p10" src="img/po3.png" />

<img id="p11" src="img/mc1.png" />

<img id="p12" src="img/bm1.png" />

<img id="p13" src="img/dp1.png" />

<img id="p14" src="img/lr3.png" />

<img id="p15" src="img/lr1.png" />

<img id="p16" src="img/nop.png" />


<!-- REFERENCE MAP -->


<img src="y.gif" usemap="#map1" 
style="border-style:none; position: absolute; left: -444px; top: 100px;" />

<map id="map1" >

<area shape="poly" coords="446,4,539,60,447,116,352,59" alt="Site 1" id="site1" no="1"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="235,130,328,74,420,129,329,186," alt="Site 2" id="site2" no="2"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="470,129,562,74,655,130,563,185,"	alt="Site 3" id="site3" no="3"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="119,201,212,145,306,201,212,257," alt="Site 4" id="site4" no="4"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="353,199,446,144,538,200,445,257," alt="Site 5" id="site5" no="5"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="586,201,678,144,771,199,679,257," alt="Site 6" id="site6" no="6"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="3,271,95,214,187,270,96,327," alt="Site 7" id="site7" no="7"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="236,271,329,214,421,270,329,326," alt="Site 8" id="site8" no="8"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="470,271,562,215,655,270,562,326," alt="Site 9" id="site9" no="9"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="703,270,794,215,887,270,796,326," alt="Site 10" id="site10" no="10"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="120,340,212,284,306,340,212,396," alt="Site 11" id="site11" no="11"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="353,340,445,284,539,340,447,396," alt="Site 12" id="site12" no="12"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="586,340,680,284,770,340,679,396," alt="Site 13" id="site13" no="13"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="236,411,329,356,421,411,329,466," alt="Site 14" id="site14" no="14"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="469,411,562,355,655,411,563,466," alt="Site 15" id="site15" no="15"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />

<area shape="poly" coords="353,482,446,426,537,481,446,536," alt="Site 16" id="site16" no="16"
onclick="changeSite(this)"  onmouseover="over(this)" onmouseout="out(this)" />
</map>

</div>

<form action="#" id="build">
Place: number 1-16 <br/> <input type="text" name="place" id="place"/> <br/> <br/>
Building type: <br/>
nop - to clear <br/>
<input type="text" name="btype"/> <br/><br/>
<input type="button" value="Build" onclick="results(this.form)"/>
</form>


        <h:form id="tbar">
            <p:toolbar>
                <p:toolbarGroup  align="left">
                    <p:commandButton disabled="true" value="Username" />  <h:outputText value="" /> <!-- SEPARATOR -->
                    <h:outputText value="#{auth.username}"  /> <h:outputText value="" /> <!-- SEPARATOR -->

                    <p:commandButton disabled="true" value="Points" />  <h:outputText value="" /> <!-- SEPARATOR -->
                    <h:outputText value="#{auth.researchPoints}"/>  <h:outputText value="" /> <!-- SEPARATOR -->

                    <p:commandButton disabled="true" value="Money" />  <h:outputText value="" /> <!-- SEPARATOR -->
                    <h:outputText value="#{auth.money}" />  <h:outputText value="" /> <!-- SEPARATOR -->

                    <p:commandButton disabled="true" value="Students" />  <h:outputText value="" /> <!-- SEPARATOR -->
                    <h:outputText value="#{auth.undergraduatesnumber}"/> <h:outputText value="" /> <!-- SEPARATOR -->

                    <p:commandButton disabled="true" value="PhDs"  />  <h:outputText value="" /> <!-- SEPARATOR -->
                    <h:outputText value="#{auth.phdsnumber}"/> <h:outputText value="" /> <!-- SEPARATOR -->

                </p:toolbarGroup>

                <p:toolbarGroup align="right">

                    <p:commandButton type="push" image="ui-icon ui-icon-arrowrefresh-1-w" action="#{unlog.logoff}" value="Log out" />
                </p:toolbarGroup>

            </p:toolbar>

            <p:poll interval="10" update="tbar"/>
        </h:form>


        <h:form id="lform">

            <p:menu id="lmenu" style="width: 200px">
                <p:submenu label="Messages">
                    <p:menuitem value="New" onclick="newmsg.show();"  />
                    <p:menuitem value="Inbox" onclick="readmsg.show();"   />
                </p:submenu>

                <p:submenu label="Trading">
                    <p:menuitem value="Make Offer" onclick="newtrade.show();"/>
                    <p:menuitem value="View offers" onclick="viewtrade.show();"/>
                    <p:menuitem value="Notice board" onclick="noticeboard.show();" />
                    <p:menuitem value="Add notice-board offer" onclick="addnoticeoffer.show();" />
                </p:submenu>

                <p:submenu label="Reasearches">
                    <p:menuitem value="New" onclick="newres.show();" />
                    <p:menuitem value="Manage" onclick="resmag.show();" />
                </p:submenu>

                <p:submenu label="Buy">
                    <p:menuitem value="Professor" onclick="buypro.show();"  />
                    <p:menuitem value="PhDs" onclick="buyphd.show();" />
                    <p:menuitem value="Students" onclick="buystu.show();"  />
                </p:submenu>

                <p:submenu label="Department">
                    <p:menuitem value="Change name" actionListener="#{buttonBean.save}"/>
                    <p:menuitem value="Delete" action="#{department.deleteDepartment}" icon="ui-icon ui-icon-close" />
                    <p:menuitem value="Log out" action="#{unlog.logoff}" icon="ui-icon ui-icon-arrowrefresh-1-w" />
                </p:submenu>

                <p:submenu label="User">
                    <p:menuitem value="Delete" action="#{user.deleteMe}" icon="ui-icon ui-icon-close" />
                </p:submenu>

            </p:menu>
        </h:form>



        <p:dialog header="New Message" widgetVar="newmsg" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >

            <h:form>

                <h:outputText value="To: " />
                <h:selectOneMenu value="#{message.selectedReceiver}">
                    <f:selectItems value="#{message.receivers}"/>
                </h:selectOneMenu>

                <br></br>
                <h:outputText value="Subject:"/>
                <h:inputText value="#{message.subject}"/>
                <br></br>


                <h:inputTextarea style="width:300px;height:100px;" value="#{message.text}"/>
                <br></br>

                <h:commandButton value="Send" action="#{message.send}"/>
void
            </h:form>

            <a onclick="newmsg.hide()"> CLICK THIS TO HIDE </a>
        </p:dialog>

        <p:dialog header="Message inbox" widgetVar="readmsg" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >

            <h:form>

                <p:wizard widgetVar="wizzard"  flowListener="#{plainMessageReader.onFlowProcess}">

                    <p:tab id="subject" title="MessageSubject">

                        <p:panel header="Message subject">

                            <h:outputText value="Choose message subject: " />
                            <h:selectOneMenu value="#{plainMessageReader.selectedMessage}" >
                                <f:selectItems value="#{plainMessageReader.messagesSubjects}"/>
                            </h:selectOneMenu>
                        </p:panel>
                    </p:tab>

                    <p:tab title="MessageText" id="text">
                        <p:panel header="Message data" >
                            <h:outputText value="Message: "/>
                            <br/>
                            <h:outputText value="#{plainMessageReader.text}" />

                        </p:panel>
                    </p:tab>


                </p:wizard>
            </h:form>

            <a onclick="readmsg.hide()"> CLICK THIS TO HIDE </a>
        </p:dialog>


        <p:dialog header="New Trade" widgetVar="newtrade" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >


            <h:form>
                <h:outputText value="To: " />
                <h:selectOneMenu value="#{tradeMessageWriter.selectedReceiver}">
                    <f:selectItems value="#{tradeMessageWriter.receivers}"/>
                </h:selectOneMenu>

                <br/>
                <h:outputText value="Title of the trade: "/>
                <h:inputText value="#{tradeMessageWriter.subject}" />
                <br/>
                <h:outputText value="Offered resources:" />
                <h:selectOneMenu value="#{tradeMessageWriter.resourcesOfferedType}">
                    <f:selectItems value="#{tradeMessageWriter.availableResources}"/>
                </h:selectOneMenu>

                <h:outputText value="Offered amount: "/>
                <p:inputText id="offeredAmount" value="#{tradeMessageWriter.amountOffered}" />
                <p:slider for="offeredAmount"/>
                <br/>
                <h:outputText value="Wanted resources:" />
                <h:selectOneMenu value="#{tradeMessageWriter.resourcesWantedType}">
                    <f:selectItems value="#{tradeMessageWriter.availableResources}"/>
                </h:selectOneMenu>

                <h:outputText value="Wanted amount: "/>
                <p:inputText id="wantedAmount" value="#{tradeMessageWriter.amountWanted}" />
                <p:slider for="wantedAmount"/>
                <br/>
                <h:outputText value="Trade description (arguments?)"/>
                <p:inputTextarea style="width:300px;height:100px;" effectDuration="400"
                                 value="#{tradeMessageWriter.tradeDescription}"/>

                <h:commandButton value="Make Trade Offer" actionListener="#{tradeMessageWriter.sendTrade}" />
            </h:form>


            <a onclick="newtrade.hide()"> CLICK THIS TO HIDE </a>
        </p:dialog>

        <p:dialog header="View Trades" widgetVar="viewtrade" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >
            <h:form>

                <p:dataTable id="offeredTrades" var="tradeOffer" value="#{tradeMessageReader.offeredTrades}" >

                    <p:column headerText="Trade sender">
                        <h:outputText value="#{tradeOffer.senderid}" />
                    </p:column>

                    <p:column headerText="Trade receiver">
                        <h:outputText value="#{tradeOffer.receiverid}" />
                    </p:column>

                    <p:column headerText="Resource offered: ">
                        <h:outputText value="#{tradeOffer.resourcesOfferedName}"/>
                    </p:column>

                    <p:column headerText="Amount offered: " >
                        <h:outputText value="#{tradeOffer.amountOffered}"/>
                    </p:column>

                    <p:column headerText="Resources wanted: ">
                        <h:outputText value="#{tradeOffer.resourcesWantedName}"/>
                    </p:column>

                    <p:column headerText="Amounte wanted: ">
                        <h:outputText value="#{tradeOffer.amountWanted}" />
                    </p:column>

                    <p:column>
                        <h:commandButton value="Accept" >
                            <f:setPropertyActionListener value="#{tradeOffer}" target="#{tradeMessageReader.acceptTradeOffer}" />
                        </h:commandButton>

                        <h:commandButton value="Decline" >
                            <f:setPropertyActionListener value="#{tradeOffer}" target="#{tradeMessageReader.declineTradeOffer}" />
                        </h:commandButton>

                    </p:column>

                </p:dataTable>
                <p:poll interval="5" update="offeredTrades" />
            </h:form>



            <a onclick="viewtrade.hide()"> CLICK THIS TO HIDE </a>
        </p:dialog>

        <p:dialog header="Notice board" widgetVar="noticeboard" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >

            <h:form>
                
                <p:dataTable id="noticeBoard" var="tradeOffer" value="#{noticeMessageReader.offeredNoticeTrades}" >
                    <p:column headerText="Trade sender">
                        <h:outputText value="#{tradeOffer.senderid}" />
                    </p:column>

                    <p:column headerText="Resource offered: ">
                        <h:outputText value="#{tradeOffer.resourcesOfferedName}"/>
                    </p:column>

                    <p:column headerText="Amount offered: " >
                        <h:outputText value="#{tradeOffer.amountOffered}"/>
                    </p:column>

                    <p:column headerText="Resources wanted: ">
                        <h:outputText value="#{tradeOffer.resourcesWantedName}"/>
                    </p:column>

                    <p:column headerText="Amount wanted: ">
                        <h:outputText value="#{tradeOffer.amountWanted}" />
                    </p:column>

                    <p:column headerText="Action: ">
                        <h:commandButton value="Answer" >
                            <f:setPropertyActionListener value="#{tradeOffer}" target="#{noticeMessageReader.answerTradeOffer}" />
                       </h:commandButton>
                   </p:column>

                </p:dataTable>

                <p:poll interval="5" update="noticeBoard" />
            </h:form>

            <a onclick="noticeboard.hide()"> CLICK THIS TO HIDE </a>
        </p:dialog>

                <p:dialog header="Add notice-board offer" widgetVar="addnoticeoffer" modal="true" height="500" width="700"
                          showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >

                <h:form>


                <br/>
                <h:outputText value="Title of the trade: "/>
                <h:inputText value="#{noticeMessageWriter.subject}" />
                <br/>
                <h:outputText value="Offered resources:" />
                <h:selectOneMenu value="#{noticeMessageWriter.resourcesOfferedType}">
                    <f:selectItems value="#{noticeMessageWriter.availableResources}"/>
                </h:selectOneMenu>

                <h:outputText value="Offered amount: "/>
                <p:inputText id="offeredAmount" value="#{noticeMessageWriter.amountOffered}" />
                <p:slider for="offeredAmount"/>
                <br/>
                <h:outputText value="Wanted resources:" />
                <h:selectOneMenu value="#{noticeMessageWriter.resourcesWantedType}">
                    <f:selectItems value="#{noticeMessageWriter.availableResources}"/>
                </h:selectOneMenu>

                <h:outputText value="Wanted amount: "/>
                <p:inputText id="wantedAmount" value="#{noticeMessageWriter.amountWanted}" />
                <p:slider for="wantedAmount"/>
                <br/>
                <h:outputText value="Trade description (arguments?)"/>
                <p:inputTextarea style="width:300px;height:100px;" effectDuration="400"
                                 value="#{tradeMessageWriter.tradeDescription}"/>

                <h:commandButton value="Make Trade Offer" actionListener="#{noticeMessageWriter.sendNoticeOffer}" />
                    </h:form>
                    <a onclick="addnoticeoffer.hide()"> CLICK THIS TO HIDE </a>
                </p:dialog>


        <p:dialog header="New Research" widgetVar="newres" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >

            <p>Now, you must specify what research you would like to perform.</p>

            <h:form>

                <p:wizard widgetVar="wiz"  flowListener="#{addResearch.onFlowProcess}">

                    <p:tab id="researchSubject" title="Research Subject" >
                        <p:panel header="ResarchSubject">
                            <h:outputText value="Choose research subject: " />
                            <h:selectOneMenu value="#{addResearch.subject}" >
                                <f:selectItems value="#{addResearch.subjects}"/>
                            </h:selectOneMenu>
                        </p:panel>
                    </p:tab>

                    <p:tab id="researchLecturers" title="Lecturers for Research" >
                        <p:panel header="Lecturers for Research">
                            <h:outputText value="Choose lecturers: "/>
                            <h:selectManyListbox value="#{addResearch.lecturers}">
                                <f:selectItems value="#{addResearch.lecturerList}"/>
                            </h:selectManyListbox>
                        </p:panel>
                    </p:tab>

                    <p:tab id="availableResearches" title="Available Researches" >
                        <p:panel header="Available Researches">
                            <h:outputText value="Choose research: "/>
                            <h:selectOneMenu value="#{addResearch.chosenResearch}" >
                                <f:selectItems value="#{addResearch.availableResearches}"/>
                            </h:selectOneMenu>
                        </p:panel>
                    </p:tab>

                    <p:tab id="moneyAmount" title="Specify money grant for research" >
                        <p:panel header="Specify money grant for research">
                            <h:outputText value="Input money min: "/>
                            <h:outputText value="#{addResearch.minimumMoney}" />
                            <h:outputText value=" max: " />
                            <h:outputText value="#{addResearch.maximumMoney}"/>
                            <h:inputText value="#{addResearch.moneyAmount}" />
                        </p:panel>
                    </p:tab>

                    <p:tab id="confirmation" title="Research Confirmation" >
                        <p:panel header="Research Confirmation">

                            <h:panelGrid columns="2" border="1" >

                                <h:outputText value="Name of Research: "/>
                                <h:outputText value="#{addResearch.researchName}" />

                                <h:outputText value="Money: "/>
                                <h:outputText value="#{addResearch.moneyAmount}" />

                                <h:outputText value="Subject: "/>
                                <h:outputText value="#{addResearch.subjectName}" />

                                <h:commandButton actionListener="#{addResearch.startResearch}" value="Add Research"/>
                                <h:commandButton actionListener="#{addResearch.clean}" value="Clean" />

                            </h:panelGrid>


                        </p:panel>
                    </p:tab>
                </p:wizard>
            </h:form>

            <h3>Available researches: </h3>

            <h:form>
                <p:tree value="#{addResearch.root}" var="node">
                    <p:treeNode>
                        <h:outputText value="#{node}"/>
                    </p:treeNode>
                </p:tree>

            </h:form>

        </p:dialog>



        <p:dialog header="Manage researches" widgetVar="resmag" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >

            <h:form>
                <p:dataTable id="ongoingResearches" var="research" value="#{researchBag.researches}">

                    <p:column headerText="Research Title">
                        <h:outputText value="#{research.name}" />
                    </p:column>

                    <p:column headerText="Progress Bar">
                        <p:progressBar widgetVar="pbAjax" ajax="true" value="#{research.researchTime}" />
                    </p:column>

                    <p:column headerText="Control button">
                        <p:commandButton value="#{research.state}" >
                            <f:setPropertyActionListener value="#{research}" target="#{researchBag.selectedResearch}" />

                        </p:commandButton>
                    </p:column>
                </p:dataTable>
                <p:poll interval="10" update="ongoingResearches" />
            </h:form>

            <h3>Finished Researches</h3>

            <h:form>
                <p:tree value="#{researchBag.finishedReserchTree}" id="finishedResearches" var="node">
                    <p:treeNode>
                        <h:outputText value="#{node}"/>
                    </p:treeNode>
                </p:tree>
                <p:poll interval="10" update="finishedResearches" />
            </h:form>


        </p:dialog>


        <p:dialog header="Buy Professor" widgetVar="buypro" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >

            <h:form>
                <h:outputText value="Type lecturers name" />
                <p:inputText value="#{lec.lecturer}" />
                <br/>
                <p:commandButton value="Submit" action="#{lec.buy}"/>
                <br/>

            </h:form>

        </p:dialog>

        <p:dialog header="Buy PhDs" widgetVar="buyphd" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >

            <h:form>

                <h:outputText value="PhD (£20/unit):" />
                <p:inputText value="#{shop. phds}" />
                <br/>
                <p:commandButton value="Submit" action="#{shop.submitphds}"/>

            </h:form>




        </p:dialog>

        <p:dialog header="Buy Students" widgetVar="buystu" modal="true" height="500" width="700"
                  showEffect="fade" hideEffect="fade" closeOnEscape="true" resizable="no" draggable="false" >

            <h:form>

                <h:outputText value="Student (£5/unit):" />
                <p:inputText value="#{shop.students}" />
                <br/>
                <p:commandButton value="Submit" action="#{shop.submitstudents}"/>

            </h:form>



        </p:dialog>



    </body>
</html>
